(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{109:function(e,t,n){e.exports={modal:"modal-overlay_modal__K6Qef"}},110:function(e,t,n){e.exports={element_block:"ingredient-item-constructor_element_block__1nmCF"}},112:function(e,t,n){e.exports={wrapper:"preloader_wrapper__A_rXo"}},114:function(e,t,n){e.exports={count:"order-counter_count__2lJQv"}},116:function(e,t,n){e.exports={error_text:"not-found_error_text___jg_K"}},17:function(e,t,n){e.exports={header:"app-header_header__2PE2q",header_container:"app-header_header_container__2RPVL",header_element:"app-header_header_element__cyFft",navigation:"app-header_navigation__1IM0q",menu_list:"app-header_menu_list__2JTqd",left_menu:"app-header_left_menu__2qM6H",right_menu:"app-header_right_menu__17Q9X",menu_list_item:"app-header_menu_list_item__3k7Ae",menu_list_item_active:"app-header_menu_list_item_active__1aJfY",menu_text:"app-header_menu_text__1cTBu"}},20:function(e,t,n){e.exports={content_block:"ingredient-details_content_block__3XMZn",ingredient_name:"ingredient-details_ingredient_name__qPW0_",info:"ingredient-details_info__281hE",info_block:"ingredient-details_info_block__wULZA",ingredient_container:"ingredient-details_ingredient_container__1m0ku",ingredient_single_container:"ingredient-details_ingredient_single_container__23w6-",single_heading:"ingredient-details_single_heading___1QwM"}},21:function(e,t,n){e.exports={section_container:"burger-ingredients_section_container__3G0ux",ingredients:"burger-ingredients_ingredients__38w2T",tab_block:"burger-ingredients_tab_block__3NOaj",ingredients_block:"burger-ingredients_ingredients_block__HYCSs",ingredient_type:"burger-ingredients_ingredient_type__1lfR6",ingredients_wrapper:"burger-ingredients_ingredients_wrapper__xjF1g"}},229:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var r,a=n(34),c=n.n(a),i=n(43),s=n(9),o=n(5),l=i.c,d=function(){return Object(i.b)()},u=n(1),_=n(4),m=n(17),j=n.n(m),b=n(0),p=[{title:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",url:"/",icon:Object(b.jsx)(_.BurgerIcon,{type:"primary"})},{title:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",url:"/feed",icon:Object(b.jsx)(_.ListIcon,{type:"primary"})}],O=[{title:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",url:"/profile",icon:Object(b.jsx)(_.ProfileIcon,{type:"primary"})}],f=function(){return Object(b.jsx)("header",{className:j.a.header,children:Object(b.jsx)("div",{className:j.a.header_container,children:Object(b.jsxs)("nav",{className:j.a.navigation,children:[Object(b.jsx)("ul",{className:"".concat(j.a.menu_list," ").concat(j.a.left_menu," ").concat(j.a.header_element),children:p.map((function(e,t){return Object(b.jsxs)(o.c,{exact:!0,to:{pathname:e.url},className:"".concat(j.a.menu_list_item," text text_type_main-default text_color_inactive"),activeStyle:{color:"white"},children:[e.icon,Object(b.jsx)("span",{className:"ml-2",children:e.title})]},t)}))}),Object(b.jsx)(o.b,{to:{pathname:"/"},children:Object(b.jsx)(_.Logo,{})}),Object(b.jsx)("ul",{className:"".concat(j.a.menu_list," ").concat(j.a.right_menu," ").concat(j.a.header_element),children:O.map((function(e,t){return Object(b.jsxs)(o.c,{to:{pathname:"/profile"},className:"".concat(j.a.menu_list_item," text text_type_main-default text_color_inactive"),activeStyle:{color:"white"},children:[e.icon,Object(b.jsx)("span",{className:"ml-2",children:e.title})]},t)}))})]})})})},x=n(235),g=n(119),h=n(6),v=n(21),y=n.n(v),N=n(236),k=n(28),E=n.n(k),R=["\u0411\u0443\u043b\u043a\u0438","\u0421\u043e\u0443\u0441\u044b","\u041d\u0430\u0447\u0438\u043d\u043a\u0438"],S="ingredient",T="sortable_ingredient",w="profile";!function(e){e.total="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f: ",e.totalToday="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f: "}(r||(r={}));var I=function(e){var t=e.ingredient,n=t._id,r=t.type,a=Object(N.a)({type:S,item:{id:n,type:r},collect:function(e){return{isDrag:e.isDragging()}}}),c=Object(h.a)(a,2),i=c[0].isDrag,d=c[1],m=l((function(e){return e.order})),j=m.currentOrderBun,p=m.currentOrderIngredients,O=Object(u.useMemo)((function(){return"bun"===r&&j&&n===j._id?1:p&&p.filter((function(e){return e._id===n})).length}),[j,p]),f=Object(s.h)();return Object(b.jsx)(o.b,{to:{pathname:"/ingredients/".concat(n),state:{background:f}},className:E.a.link,children:!i&&Object(b.jsxs)("li",{ref:d,className:"".concat(E.a.ingredient_item," mb-10"),children:[Object(b.jsx)("img",{className:E.a.image,src:t.image,alt:t.name}),Object(b.jsxs)("div",{className:E.a.price,children:[Object(b.jsx)("p",{className:"".concat(E.a.price_text," text text_type_main-small mr-1"),children:t.price}),Object(b.jsx)(_.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)("p",{className:"".concat(E.a.name_text," text text_type_main-default mt-1"),children:t.name}),O&&Object(b.jsx)(_.Counter,{count:O,size:"default"})]})},n)},C=function(){var e=Object(u.useState)("\u0411\u0443\u043b\u043a\u0438"),t=Object(h.a)(e,2),n=t[0],r=t[1],a=l((function(e){return e.ingredients})).allIngredients,c=Object(u.useRef)(null),i=Object(u.useRef)(null),s=Object(u.useRef)(null),o=Object(u.useRef)(null),d=function(e){return c.current&&Math.abs(c.current.getBoundingClientRect().y-e.current.getBoundingClientRect().y)};return Object(b.jsxs)("section",{className:y.a.section_container,children:[Object(b.jsx)("p",{className:"text text_type_main-large mt-10",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(b.jsx)("div",{ref:c,className:"".concat(y.a.tab_block," mt-5"),children:R.map((function(e,t){return Object(b.jsx)(_.Tab,{value:e,active:n===R[t],onClick:function(){return function(e){switch(r(e),e){case R[0]:var t;i&&(null===(t=i.current)||void 0===t||t.scrollIntoView({behavior:"smooth"}));break;case R[1]:var n;s&&(null===(n=s.current)||void 0===n||n.scrollIntoView({behavior:"smooth"}));break;case R[2]:var a;o&&(null===(a=o.current)||void 0===a||a.scrollIntoView({behavior:"smooth"}))}}(R[t])},children:e},t)}))}),Object(b.jsxs)("div",{className:y.a.ingredients_wrapper,onScroll:function(){var e=d(i),t=d(s),n=d(o),a=Math.min(null!==e&&void 0!==e?e:0,null!==n&&void 0!==n?n:0,null!==t&&void 0!==t?t:0);r(e===a?"\u0411\u0443\u043b\u043a\u0438":t===a?"\u0421\u043e\u0443\u0441\u044b":"\u041d\u0430\u0447\u0438\u043d\u043a\u0438")},children:[Object(b.jsx)("p",{className:"".concat(y.a.ingredient_type," text text_type_main-small mt-10 mb-6"),ref:i,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(b.jsx)("ul",{className:"".concat(y.a.ingredients_block," pl-4 pr-4"),children:a&&a.map((function(e,t){return"bun"===e.type&&Object(b.jsx)(I,{ingredient:e},t)}))}),Object(b.jsx)("p",{className:"".concat(y.a.ingredient_type," text text_type_main-small mt-10 mb-6"),ref:s,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(b.jsx)("ul",{className:"".concat(y.a.ingredients_block," pl-4 pr-4"),children:a&&a.map((function(e,t){return"sauce"===e.type&&Object(b.jsx)(I,{ingredient:e},t)}))}),Object(b.jsx)("p",{className:"".concat(y.a.ingredient_type," text text_type_main-small mt-10 mb-6"),ref:o,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}),Object(b.jsx)("ul",{className:"".concat(y.a.ingredients_block," pl-4 pr-4"),children:a&&a.map((function(e,t){return"main"===e.type&&Object(b.jsx)(I,{ingredient:e},t)}))})]})]})},U=n(44),D=n(2),P=n(237),A=n(29),q=n.n(A),B=n(81),M=n.n(B),F=n(109),L=n.n(F),G=function(e){var t=e.onClick;return Object(b.jsx)("div",{id:"modal",className:L.a.modal,onClick:t})},J=document.getElementById("react-modals")||document.createElement("div");J.setAttribute("id","react-modals");var V,W=function(e){var t=e.children,n=e.onClick,r=function(e){"Escape"===e.key&&n()};return Object(u.useEffect)((function(){return document.addEventListener("keydown",r),function(){return document.removeEventListener("keydown",r)}}),[]),c.a.createPortal(Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(G,{onClick:n}),Object(b.jsxs)("div",{className:"".concat(M.a.modal_content),children:[Object(b.jsx)("div",{className:M.a.close_icon,onClick:n,children:Object(b.jsx)(_.CloseIcon,{type:"primary"})}),t]})]}),J)},z=n(58),H=n.n(z),Q=n.p+"static/media/done.e036971b.png",Z=function(){var e=l((function(e){return e.makingOrder})).orderNumber;return Object(b.jsxs)("div",{className:"".concat(H.a.content_block," mt-30 mb-30 mr-25 ml-25"),children:[Object(b.jsx)("p",{className:"".concat(H.a.order_number," text text_type_digits-large"),children:e}),Object(b.jsx)("p",{className:"text text_type_main-medium mt-8",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(b.jsx)("img",{src:Q,alt:"\u0433\u0430\u043b\u043e\u0447\u043a\u0430",className:"mt-15"}),Object(b.jsx)("p",{className:"text text_type_main-default mt-15",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(b.jsx)("p",{className:"".concat(H.a.grey_text," text text_type_main-default mt-2"),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},K=function(e){return e.ok?e.json():e.json().then((function(t){return t.message?Promise.reject(t.message):Promise.reject(e)}))},X=function(e){return new Date(e).toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"})},Y=function(e){return 1===e?5:2===e?4:3===e?3:4===e?2:5===e?1:0},$=function(e,t){return e.reduce((function(e,n){return e+t.find((function(e){return e._id===n})).price}),0)},ee=n(110),te=n.n(ee),ne=function(e){var t=e.item,n=e.index,r=e.id,a=e.deleteIngredient,c=e.moveCard,i=Object(u.useRef)(null),s=Object(P.a)({accept:T,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var r;if(i.current){var a=e.index,s=n;if(a!==s){var o=null===(r=i.current)||void 0===r?void 0:r.getBoundingClientRect(),l=(o.bottom-o.top)/2,d=t.getClientOffset().y-o.top;a<s&&d<l||a>s&&d>l||(c(a,s),e.index=s)}}}}),o=Object(h.a)(s,2),l=o[0].handlerId,d=o[1],m=Object(N.a)({type:T,item:function(){return{id:r,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),j=Object(h.a)(m,2),p=j[0].isDragging?0:1;return(0,j[1])(d(i)),Object(b.jsxs)("div",{className:"".concat(te.a.element_block," mb-4 mr-4"),ref:i,style:{opacity:p},"data-handler-id":l,children:[Object(b.jsx)(_.DragIcon,{type:"primary"}),Object(b.jsx)(_.ConstructorElement,{text:t.name,price:t.price,thumbnail:t.image,handleClose:function(){return a(t.id)}})]},t.id)},re=n(82),ae=n.n(re),ce=n(111),ie="GET_ORDER_NUMBER_REQUEST",se="GET_ORDER_NUMBER_FAILED",oe="GET_ORDER_NUMBER_SUCCESS",le="CLEAR_ORDER_NUMBER",de="ADD_INGRIDIENT_INTO_ORDER",ue="DELETE_INGRIDIENT_FROM_ORDER",_e="UPDATE_ORDER_AFTER_DROP",me="CLEAR_ORDER",je=n(112),be=n.n(je),pe=n(113),Oe=n.n(pe),fe=function(){return Object(b.jsx)("div",{className:be.a.wrapper,children:Object(b.jsx)(Oe.a,{color:"rgb(128, 26, 179)",height:300,width:300,type:"BallTriangle"})})},xe=function(){var e=Object(s.g)(),t=d(),n=l((function(e){return e.order})),r=n.currentOrderBun,a=n.currentOrderIngredients,c=l((function(e){return e.makingOrder})).getOrderRequest,i=l((function(e){return e.ingredients})).allIngredients,o=l((function(e){return e.auth})).user,m=Object(u.useState)(!1),j=Object(h.a)(m,2),p=j[0],O=j[1],f=Object(P.a)({accept:S,drop:function(e){var n=i.find((function(t){return t._id===e.id}));n&&t({type:de,ingType:e.type,data:Object(D.a)(Object(D.a)({},n),{},{id:Math.random().toString(36).substr(2,9)})})},collect:function(e){return{isOver:e.isOver()}}}),x=Object(h.a)(f,2),g=x[0].isOver,v=x[1],y=Object(u.useMemo)((function(){return(r?r.price:0)+(a?a.map((function(e){return e.price})).reduce((function(e,t){return e+t})):0)}),[a,r]),N=function(e){return t({type:ue,ingId:e})},k=function(e,n){if(a){var r=a[e],c=Object(U.a)(a);c.splice(e,1),c.splice(n,0,r),t({type:_e,data:c})}};return Object(b.jsxs)("section",{ref:v,className:"".concat(q.a.section_container," ").concat(g?q.a.section_border:""," mt-25"),children:[r&&Object(b.jsx)("div",{className:"ml-10 mr-5 mb-4",children:Object(b.jsx)(_.ConstructorElement,{type:"top",text:r.name+"(\u0432\u0435\u0440\u0445)",price:r.price,thumbnail:r.image,isLocked:!0},r.id+"\u0432\u0435\u0440\u0445")}),a&&Object(b.jsx)("div",{className:q.a.ingredients_wrapper,children:a.map((function(e,t){var n;return Object(b.jsx)(ne,{item:e,id:null!==(n=e.id)&&void 0!==n?n:"",index:t,deleteIngredient:N,moveCard:k},e.id)}))}),r&&Object(b.jsx)("div",{className:"ml-10 mt-3",children:Object(b.jsx)(_.ConstructorElement,{type:"bottom",text:r.name+"(\u043d\u0438\u0437)",price:r.price,thumbnail:r.image,isLocked:!0},r.id+"\u043d\u0438\u0437")}),!!y&&Object(b.jsxs)("div",{className:"".concat(q.a.total," mt-10 mr-4"),children:[Object(b.jsxs)("div",{className:"".concat(q.a.total_price," mr-10"),children:[Object(b.jsx)("p",{className:"".concat(q.a.total_price_number," text text_type_main-default mr-2"),children:"".concat(y)}),Object(b.jsx)(_.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)(_.Button,{onClick:function(){if(o){if(r&&a){var n=[].concat(Object(U.a)(a),[r]);t((c=n,function(){var e=Object(ce.a)(ae.a.mark((function e(t){var n,r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ie}),e.prev=1,e.next=4,fetch("https://norma.nomoreparties.space/api/orders",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("accessToken")},method:"POST",body:JSON.stringify({ingredients:c&&c.map((function(e){return e._id}))})});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,t({type:oe,data:r}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t({type:se});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}())),O(!0)}}else e.replace({pathname:"/login"});var c},type:"primary",size:"medium",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]}),p&&(c?Object(b.jsx)(fe,{}):Object(b.jsx)(W,{onClick:function(){t({type:me}),t({type:le}),O(!1)},children:Object(b.jsx)(Z,{})}))]})},ge=n(83),he=n.n(ge),ve=function(){return Object(b.jsx)("main",{className:he.a.main_container,children:Object(b.jsx)("div",{className:"".concat(he.a.ingredients_block),children:Object(b.jsxs)(x.a,{backend:g.a,children:[Object(b.jsx)(C,{}),Object(b.jsx)(xe,{})]})})})},ye=n(30),Ne=n.n(ye),ke="REGISTRATION REQUEST",Ee="REGISTRATION ERROR",Re="REGISTRATION SUCCESS",Se="AUTH_REQUEST",Te="AUTH_ERROR",we="AUTH_SUCCESS",Ie="REFRESH_TOKEN_REQUEST",Ce="REFRESH_TOKEN_ERROR",Ue="REFRESH_TOKEN_SUCCESS",De=function(e){return function(t){t({type:Ie}),fetch("https://norma.nomoreparties.space/api/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(K).then((function(n){n.success&&(localStorage.setItem("refreshToken",n.refreshToken),localStorage.setItem("accessToken",n.accessToken.split("Bearer ")[1]),t({type:Ue,data:n}),t(e))})).catch((function(e){return"Token is invalid"===e?t(He()):console.error(e)}))}},Pe="GET_USER_REQUEST",Ae="GET_USER_ERROR",qe="GET_USER_SUCCESS",Be=function e(){return function(t){t({type:Pe}),fetch("https://norma.nomoreparties.space/api/auth/user",{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}).then(K).then((function(e){return t({type:qe,data:e.user})})).catch((function(n){return"jwt expired"===n?t(De(e())):console.error(n)}))}},Me="PATCH_USER_REQUEST",Fe="PATCH_USER_ERROR",Le="PATCH_USER_SUCCESS",Ge="IS_DATA_USER_UPDATED",Je=function e(t){return function(n){n({type:Me});var r={email:t.email,password:t.password,name:t.name};fetch("https://norma.nomoreparties.space/api/auth/user",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("accessToken")},body:JSON.stringify(r)}).then(K).then((function(r){r.success||"jwt expired"!==r.message||De(e(t)),r.success&&n({type:Le,data:r.user})})).catch((function(e){return n({type:Fe})}))}},Ve="LOGOUT_REQUEST",We="LOGOUT__ERROR",ze="LOGOUT_SUCCESS",He=function(){return function(e){e({type:Ve}),fetch("https://norma.nomoreparties.space/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(K).then((function(t){t.success&&(e({type:ze}),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"))})).catch((function(t){return e({type:We})}))}},Qe=function(){var e=Object(s.g)(),t=d(),n=Object(u.useState)(""),r=Object(h.a)(n,2),a=r[0],c=r[1],i=Object(u.useState)(""),m=Object(h.a)(i,2),j=m[0],p=m[1],O=l((function(e){return e.auth})).user,f=Object(s.h)().state;return Object(u.useEffect)((function(){O&&(null===f||void 0===f?void 0:f.from)?e.replace({pathname:f.from.pathname}):O&&e.replace({pathname:"/"})}),[O]),Object(b.jsxs)("div",{className:Ne.a.login_container,children:[Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u0445\u043e\u0434"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(function(e,t){return function(n){n({type:Se});var r={email:e,password:t};fetch("https://norma.nomoreparties.space/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(K).then((function(e){e.success&&(localStorage.setItem("refreshToken",e.refreshToken),localStorage.setItem("accessToken",e.accessToken.split("Bearer ")[1]),n({type:we,data:e}))})).catch((function(e){return n({type:Te})}))}}(j,a))},className:"".concat(Ne.a.form_block," mt-6 mb-20"),children:[Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(_.EmailInput,{onChange:function(e){return p(e.target.value)},value:j,name:"email"})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(_.PasswordInput,{onChange:function(e){return c(e.target.value)},value:a,name:"password"})}),Object(b.jsx)(_.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(b.jsxs)("div",{className:Ne.a.bottom_info,children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u044b \u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(b.jsx)(o.b,{to:{pathname:"/register"},className:"text text_type_main-default ml-4 ".concat(Ne.a.link),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(b.jsxs)("div",{className:"".concat(Ne.a.bottom_info," mt-4"),children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(b.jsx)(o.b,{to:{pathname:"/forgot-password"},className:"text text_type_main-default ml-4 ".concat(Ne.a.link),children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},Ze=n(45),Ke=n.n(Ze),Xe=function(){var e=Object(s.g)(),t=d(),n=Object(u.useState)(""),r=Object(h.a)(n,2),a=r[0],c=r[1],i=Object(u.useState)(""),m=Object(h.a)(i,2),j=m[0],p=m[1],O=Object(u.useState)(""),f=Object(h.a)(O,2),x=f[0],g=f[1],v=l((function(e){return e.auth})).user;return Object(u.useEffect)((function(){v&&e.replace({pathname:"/"})}),[v]),Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:Ke.a.login_container,children:[Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(function(e,t,n){return function(r){r({type:ke});var a={email:e,password:t,name:n};fetch("https://norma.nomoreparties.space/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(K).then((function(e){e.success&&(localStorage.setItem("refreshToken",e.refreshToken),localStorage.setItem("accessToken",e.accessToken),r({type:Re,data:e}))})).catch((function(e){return r({type:Ee})}))}}(x,j,a))},className:"".concat(Ke.a.form_block," mt-6 mb-20"),children:[Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(_.Input,{onChange:function(e){return c(e.target.value)},value:a,name:"name",placeholder:"\u0418\u043c\u044f"})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(_.EmailInput,{onChange:function(e){return g(e.target.value)},value:x,name:"email"})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(_.PasswordInput,{onChange:function(e){return p(e.target.value)},value:j,name:"password"})}),Object(b.jsx)(_.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(b.jsxs)("div",{className:Ke.a.bottom_info,children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b"}),Object(b.jsx)(o.b,{to:{pathname:"/login"},className:"text text_type_main-default ml-4 ".concat(Ke.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},Ye=n(46),$e=n.n(Ye),et="FORGOT_PASSWORD_REQUEST",tt="FORGOT_PASSWORD_ERROR",nt="FORGOT_PASSWORD_SUCCESS",rt="RESET_PASSWORD_REQUEST",at="RESET_PASSWORD_ERROR",ct="RESET_PASSWORD_SUCCESS",it=function(){var e=Object(s.g)(),t=d(),n=l((function(e){return e.forgotPassword})).forgotPasswordStatus,r=Object(u.useState)(""),a=Object(h.a)(r,2),c=a[0],i=a[1];Object(u.useEffect)((function(){n&&e.replace({pathname:"/reset-password"})}),[n]);var m=l((function(e){return e.auth})).user;return Object(u.useEffect)((function(){m&&e.replace({pathname:"/"})}),[m]),Object(b.jsxs)("div",{className:$e.a.login_container,children:[Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(function(e){return function(t){t({type:et});var n={email:e};fetch("https://norma.nomoreparties.space/api/password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(K).then((function(e){return t({type:nt})})).catch((function(e){return t({type:tt})}))}}(c))},className:"".concat($e.a.form_block," mt-6 mb-20"),children:[Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(_.EmailInput,{onChange:function(e){return i(e.target.value)},value:c,name:"email"})}),Object(b.jsx)(_.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(b.jsxs)("div",{className:$e.a.bottom_info,children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(b.jsx)(o.b,{to:{pathname:"/login"},className:"text text_type_main-default ml-4 ".concat($e.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},st=n(47),ot=n.n(st),lt=function(){var e=Object(s.g)(),t=d(),n=l((function(e){return e.forgotPassword})),r=n.resetPasswordStatus,a=n.recoveryStage,c=Object(u.useState)(""),i=Object(h.a)(c,2),m=i[0],j=i[1],p=Object(u.useState)(""),O=Object(h.a)(p,2),f=O[0],x=O[1],g=l((function(e){return e.auth})).user;return Object(u.useEffect)((function(){g&&e.replace({pathname:"/"})}),[g]),Object(u.useEffect)((function(){1!==a&&e.replace({pathname:"/forgot-password"})}),[a]),Object(b.jsx)("div",{className:ot.a.login_container,children:r?Object(b.jsx)("p",{className:"text text_type_main-large",children:"\u041f\u0430\u0440\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d."}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(function(e,t){return function(n){n({type:rt});var r={password:e,token:t};fetch("https://norma.nomoreparties.space/api/password-reset/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(K).then((function(e){return n({type:ct})})).catch((function(e){return n({type:at})}))}}(m,f))},className:"".concat(ot.a.form_block," mt-6 mb-20"),children:[Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(_.Input,{onChange:function(e){return j(e.target.value)},value:m,name:"new-password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(_.Input,{onChange:function(e){return x(e.target.value)},value:f,name:"mail-code",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430"})}),Object(b.jsx)(_.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(b.jsxs)("div",{className:ot.a.bottom_info,children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(b.jsx)(o.b,{to:{pathname:"/login"},className:"text text_type_main-default ml-4 ".concat(ot.a.link),children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})},dt=n(25),ut=n.n(dt),_t=n(56),mt=n(85),jt=n.n(mt),bt=function(){var e=d(),t=l((function(e){return e.auth})),n=t.user,r=t.isUserDataUpdated,a=Object(u.useState)({name:n?n.name:"",email:n?n.email:"",password:""}),c=Object(h.a)(a,2),i=c[0],s=c[1],o=Object(u.useState)(!1),m=Object(h.a)(o,2),j=m[0],p=m[1],O=Object(u.useState)(!1),f=Object(h.a)(O,2),x=f[0],g=f[1],v=function(e){s(Object(D.a)(Object(D.a)({},i),{},Object(_t.a)({},e.target.name,e.target.value)))};Object(u.useEffect)((function(){s(Object(D.a)(Object(D.a)({},i),{},{name:n?n.name:"",email:n?n.email:"",password:""}))}),[n]);return Object(u.useEffect)((function(){x&&setTimeout((function(){return g(!1)}),3e3)}),[x]),Object(u.useEffect)((function(){r&&setTimeout((function(){return e({type:Ge})}),3e3)}),[r]),Object(u.useEffect)((function(){p(!(i.name===n.name&&i.email===n.email&&!i.password))}),[i,n]),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault(),i.name&&i.email&&i.password?e(Je(i)):g(!0)},className:"mb-20`",children:[Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(_.Input,{onChange:function(e){return v(e)},name:"name",value:i.name,placeholder:"\u0418\u043c\u044f"})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(_.Input,{onChange:function(e){return v(e)},name:"email",value:i.email,placeholder:"\u041b\u043e\u0433\u0438\u043d"})}),Object(b.jsx)("div",{className:"mb-6",children:Object(b.jsx)(_.PasswordInput,{onChange:function(e){return v(e)},name:"password",value:i.password})}),x&&Object(b.jsx)("p",{className:"text text_type_main-small ".concat(jt.a.error_info),children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b"}),r&&Object(b.jsx)("p",{className:"text text_type_main-small ".concat(jt.a.ok_message_info),children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b"}),j&&Object(b.jsxs)("div",{children:[Object(b.jsx)(_.Button,{type:"primary",size:"small",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(b.jsx)(_.Button,{onClick:function(){var e,t;s(Object(D.a)(Object(D.a)({},i),{},{name:null!==(e=n.name)&&void 0!==e?e:"",email:null!==(t=n.email)&&void 0!==t?t:"",password:""}))},type:"secondary",size:"medium",children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})},pt=n(86),Ot=n.n(pt),ft="WS_CONNECTION_START",xt="WS_CONNECTION_SUCCESS",gt="WS_CONNECTION_ERROR",ht="WS_CONNECTION_CLOSED",vt="WS_GET_MESSAGE";!function(e){e.AllOrders="all_orders",e.UserOrders="user_orders"}(V||(V={}));var yt=n(31),Nt=n.n(yt),kt=n(48),Et=n.n(kt),Rt=function(e){var t=e.index,n=e.ingredient,r=e.isShifted,a=e.restNumber,c=l((function(e){return e.ingredients})).allIngredients,i=Object(u.useMemo)((function(){return c&&c.find((function(e){return e._id===n}))}),[n]),s=r&&t?{left:"".concat(50*(t-1),"px"),zIndex:Y(t)}:{};return Object(b.jsx)("div",{className:"".concat(Et.a.image_block," ").concat(r?Et.a.image_block_position_absolute:""),style:s,children:i&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("img",{src:i.image,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0438\u043d\u0433\u0440\u0438\u0434\u0438\u0435\u043d\u0442\u0430",className:Et.a.ingredient_image}),6===t&&Object(b.jsx)("p",{className:Et.a.rest_number,children:a})]})},t)},St=function(e){var t=e.order,n=e.wsType,r=t.ingredients,a=t.name,c=t.number,i=t.createdAt,d=t._id,m=l((function(e){return e.ingredients})).allIngredients,j=Object(u.useMemo)((function(){return"+".concat(r.length-5)}),[r]),p=Object(s.h)(),O=Object(u.useMemo)((function(){return m&&$(t.ingredients,m)}),[m,t]);return Object(b.jsx)(o.b,{to:{pathname:n===V.AllOrders?"/feed/".concat(d):n===V.UserOrders?"/profile/orders/".concat(d):void 0,state:{background:p}},className:Nt.a.link,children:Object(b.jsxs)("div",{className:"".concat(Nt.a.order_block," p-6 mb-3"),children:[Object(b.jsxs)("div",{className:"".concat(Nt.a.number_date_block," mb-6"),children:[Object(b.jsxs)("p",{className:"text text_type_digits-default",children:["#",c]}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:X(i)})]}),Object(b.jsx)("p",{className:"text text_type_main-medium mb-6",children:a}),Object(b.jsxs)("div",{className:Nt.a.bottom_block,children:[Object(b.jsx)("div",{className:Nt.a.ingredients_block,children:m&&r.map((function(e,t){if(!(t>5))return Object(b.jsx)(Rt,{isShifted:!0,ingredient:e,index:t+1,restNumber:j},t)}))}),Object(b.jsxs)("div",{className:Nt.a.price_block,children:[Object(b.jsx)("p",{className:"text text_type_main-default mr-1",children:O}),Object(b.jsx)(_.CurrencyIcon,{type:"primary"})]})]})]})})},Tt=function(){var e=d(),t=l((function(e){return e.ws})).messages;return Object(u.useEffect)((function(){return e({type:ft,url:"wss://norma.nomoreparties.space/orders",connection:V.UserOrders}),function(){e({type:ht})}}),[]),Object(b.jsx)("div",{className:Ot.a.orders_container,children:t&&Object(b.jsx)("div",{className:Ot.a.ingredients_wrapper,children:t.map((function(e,t){return Object(b.jsx)(St,{order:e,wsType:V.UserOrders},t)}))})})},wt=function(e){var t=e.type,n=Object(s.g)(),r=d(),a=l((function(e){return e.auth})).user;return Object(u.useEffect)((function(){!a&&localStorage.getItem("access_token")&&n.replace({pathname:"/login"})})),Object(b.jsx)("div",{className:"container",children:Object(b.jsxs)("div",{className:"mt-30 ".concat(ut.a.profile_container),children:[Object(b.jsxs)("div",{className:"mr-15 ".concat(ut.a.nav_container),children:[Object(b.jsx)(o.c,{to:{pathname:"/profile"},className:"mb-6 text text_type_main-medium text_color_inactive ".concat(ut.a.profile_nav_link),activeClassName:ut.a.profile_nav_active_link,exact:!0,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(b.jsx)(o.c,{to:{pathname:"/profile/orders"},className:"mb-6 text text_type_main-medium text_color_inactive ".concat(ut.a.profile_nav_link),activeClassName:ut.a.profile_nav_active_link,exact:!0,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(b.jsx)("span",{onClick:function(){r(He()),!a&&n.replace({pathname:"/login"})},className:"mb-20 text text_type_main-medium text_color_inactive ".concat(ut.a.profile_nav_link),children:"\u0412\u044b\u0445\u043e\u0434"}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),t===w?Object(b.jsx)(bt,{}):Object(b.jsx)(Tt,{})]})})},It=n(87),Ct=n.n(It),Ut=n(36),Dt=n.n(Ut),Pt=function(){var e=l((function(e){return e.ws})).messages,t=Object(u.useMemo)((function(){return e&&e.filter((function(e){return"done"===e.status}))}),[e]),n=Object(u.useMemo)((function(){return e&&e.filter((function(e){return"pending"===e.status}))}),[e]);return Object(b.jsxs)("div",{className:Dt.a.container,children:[Object(b.jsxs)("div",{className:Dt.a.orders_status_block_wrapper,children:[Object(b.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(b.jsx)("ul",{className:Dt.a.orders_status_block,children:(null===t||void 0===t?void 0:t.length)?t.map((function(e,t){return Object(b.jsx)("li",{children:Object(b.jsx)("p",{className:"text text_type_main-small",children:e.number})},t)})):Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u041d\u0435\u0442 \u0433\u043e\u0442\u043e\u0432\u044b\u0445 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})]}),Object(b.jsxs)("div",{className:Dt.a.orders_status_block_wrapper,children:[Object(b.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(b.jsx)("ul",{className:Dt.a.orders_status_block,children:(null===n||void 0===n?void 0:n.length)?n.map((function(e,t){return Object(b.jsx)("li",{children:Object(b.jsx)("p",{className:"text text_type_main-small",children:e.number})},t)})):Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u041d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0432 \u0440\u0430\u0431\u043e\u0442\u0435"})})]})]})},At=n(114),qt=n.n(At),Bt=function(e){var t=e.title,n=e.count;return Object(b.jsxs)("div",{className:"mt-15",children:[Object(b.jsx)("p",{className:"text text_type_main-medium",children:t}),Object(b.jsx)("p",{className:"text text_type_digits-large ".concat(qt.a.count),children:n})]})},Mt=function(){var e=d(),t=l((function(e){return e.ws})),n=t.messages,a=t.total,c=t.totalToday;return Object(u.useEffect)((function(){return e({type:ft,url:"wss://norma.nomoreparties.space/orders/all",connection:V.AllOrders}),function(){e({type:ht})}}),[]),Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("p",{className:"text text_type_main-large mt-10 mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(b.jsxs)("div",{className:Ct.a.content_container,children:[n&&Object(b.jsx)("div",{className:Ct.a.ingredients_wrapper,children:n.map((function(e,t){return Object(b.jsx)(St,{order:e,wsType:V.AllOrders},t)}))}),Object(b.jsxs)("div",{className:"ml-15",style:{width:"50%"},children:[Object(b.jsx)(Pt,{}),Object(b.jsx)(Bt,{title:r.total,count:null!==a&&void 0!==a?a:0}),Object(b.jsx)(Bt,{title:r.totalToday,count:null!==c&&void 0!==c?c:0})]})]})]})},Ft=n(115),Lt=["children"],Gt=function(e){var t=e.children,n=Object(Ft.a)(e,Lt),r=l((function(e){return e.auth})),a=r.user,c=r.isLoading;return Object(b.jsx)(b.Fragment,{children:c?Object(b.jsx)(fe,{}):Object(b.jsx)(s.b,Object(D.a)(Object(D.a)({},n),{},{render:function(e){var n=e.location;return a?t:Object(b.jsx)(s.a,{to:{pathname:"/login",state:{from:n}}})}}))})},Jt=n(20),Vt=n.n(Jt),Wt="GET_INGREDIENTS_REQUEST",zt="GET_INGREDIENTS_ERROR",Ht="GET_INGREDIENTS_SUCCESS",Qt="SET_INGREDIENT_MODAL_DATA",Zt="DELETE_INGREDIENT_MODAL_DATA",Kt=function(e){var t=e.type,n=l((function(e){return e.ingredients})),r=n.allIngredients,a=n.currentViewIngredient,c=Object(s.i)(),i=d(),o=Object(u.useMemo)((function(){return c.params.ingredientId}),[c]);return Object(u.useEffect)((function(){i({type:Qt,id:o})}),[r]),Object(b.jsx)(b.Fragment,{children:a&&Object(b.jsxs)("div",{className:"".concat(Vt.a.ingredient_container," ").concat(t?Vt.a.ingredient_single_container:""),children:[Object(b.jsx)("p",{className:"text text_type_main-large ".concat(t?"":"ml-10"," ").concat(t?Vt.a.single_heading:""),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(b.jsxs)("div",{className:"".concat(Vt.a.content_block," ml-25 mr-25 mb-15"),children:[Object(b.jsx)("img",{src:a.image_large,alt:a.name}),Object(b.jsx)("p",{className:"".concat(Vt.a.ingredient_name," text text_type_main-medium mt-4"),children:a.name}),Object(b.jsxs)("div",{className:"".concat(Vt.a.info," mt-8"),children:[Object(b.jsxs)("div",{className:Vt.a.info_block,children:[Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u041a\u0430\u043b\u043b\u043e\u0440\u0438\u0438,\u043a\u043a\u0430\u043b"}),Object(b.jsx)("p",{className:"text text_type_main-default",children:a.calories})]}),Object(b.jsxs)("div",{className:Vt.a.info_block,children:[Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(b.jsx)("p",{className:"text text_type_main-default",children:a.proteins})]}),Object(b.jsxs)("div",{className:Vt.a.info_block,children:[Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(b.jsx)("p",{className:"text text_type_main-default",children:a.fat})]}),Object(b.jsxs)("div",{className:Vt.a.info_block,children:[Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(b.jsx)("p",{className:"text text_type_main-default",children:a.carbohydrates})]})]})]})]})})},Xt=n(116),Yt=n.n(Xt),$t=function(){return Object(b.jsx)("p",{className:"text text_type_main-large ".concat(Yt.a.error_text),children:"\u0423\u043f\u0441..\u043a\u0430\u0436\u0435\u0442\u0441\u044f \u0442\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 :("})},en=n(117),tn=n(49),nn=n.n(tn),rn=function(e){var t=e.ingredients,n=Object(u.useState)(),r=Object(h.a)(n,2),a=r[0],c=r[1],i=l((function(e){return e.ingredients})).allIngredients;return Object(u.useEffect)((function(){var e=function(e){var t,n=[],r=Object(en.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.includes(a)||n.push(a)}}catch(c){r.e(c)}finally{r.f()}return n}(t).map((function(e){var n=t.filter((function(t){return t===e})).length,r=i.find((function(t){return t._id===e}));return Object(D.a)(Object(D.a)({},r),{},{count:n})}));c(e)}),[i,t]),Object(b.jsx)("div",{className:nn.a.ingredients_wrapper,children:a&&a.map((function(e,t){return Object(b.jsxs)("div",{className:"mb-4 mr-4 ".concat(nn.a.ingredient_wrapper),children:[Object(b.jsx)(Rt,{ingredient:e._id}),Object(b.jsx)("div",{className:"ml-6 ".concat(nn.a.name_block),children:Object(b.jsx)("p",{className:"text text_type_main-default",children:e.name})}),Object(b.jsxs)("div",{className:nn.a.price_block,children:[Object(b.jsxs)("p",{className:"ml-6 mr-2 text text_type_digits-default",children:[e.count," x ",e.price]}),Object(b.jsx)(_.CurrencyIcon,{type:"primary"})]})]},t)}))})},an=n(37),cn=n.n(an),sn=function(e){var t=e.type,n=e.wsType,r=d(),a=l((function(e){return e.ws})).messages,c=l((function(e){return e.ingredients})).allIngredients;Object(u.useEffect)((function(){if("single"===t&&n)return r({type:ft,url:n===V.AllOrders?"wss://norma.nomoreparties.space/orders/all":n===V.UserOrders?"wss://norma.nomoreparties.space/orders":"",connection:n}),function(){r({type:ht})}}),[]);var i,o=Object(s.i)(),m=Object(u.useMemo)((function(){return o.params.orderId}),[o]),j=Object(u.useMemo)((function(){return a&&a.find((function(e){return e._id===m}))}),[m,a]),p=Object(u.useMemo)((function(){return c&&j&&$(j.ingredients,c)}),[c,j]);return Object(b.jsx)(b.Fragment,{children:j&&Object(b.jsxs)("div",{className:"single"===t?cn.a.single_container:cn.a.container,children:[Object(b.jsxs)("p",{className:"text text_type_digits-default ".concat("single"===t?cn.a.number_block:""),children:["#",j.number]}),Object(b.jsx)("p",{className:"text text_type_main-medium mt-10",children:j.name}),Object(b.jsx)("p",{className:"text text_type_main-default mt-3",style:{color:"#00CCCC"},children:(i=j.status,"done"===i?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"pending"===i?"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f":"cancelled"===i?"\u041e\u0442\u043c\u0435\u043d\u0435\u043d":"")}),Object(b.jsx)("div",{className:"mt-15 mb-6",children:Object(b.jsx)("p",{className:"text text_type_main-medium",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"})}),Object(b.jsx)(rn,{ingredients:j.ingredients}),Object(b.jsxs)("div",{className:"mt-6 ".concat(cn.a.bottom_block),children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:X(j.createdAt)}),Object(b.jsxs)("div",{className:cn.a.price_block,children:[Object(b.jsx)("p",{className:"mr-2  text text_type_digits-default",children:p}),Object(b.jsx)(_.CurrencyIcon,{type:"primary"})]})]})]})})},on=function(){var e=d(),t=l((function(e){return e.auth})).user;Object(u.useEffect)((function(){e((function(e){e({type:Wt}),fetch("https://norma.nomoreparties.space/api/ingredients").then(K).then((function(t){e({type:Ht,ingredientsData:t.data})})).catch((function(t){e({type:zt})}))})),!t&&localStorage.getItem("accessToken")&&e(Be())}),[]);var n=function(){var e=Object(s.h)(),t=Object(s.g)(),n=d(),r=e.state&&e.state.background,a=function(){n({type:Zt}),t.goBack()};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f,{}),Object(b.jsxs)(s.d,{location:r||e,children:[Object(b.jsx)(s.b,{path:"/",exact:!0,children:Object(b.jsx)(ve,{})}),Object(b.jsx)(s.b,{path:"/ingredients/:ingredientId",exact:!0,children:Object(b.jsx)(Kt,{type:"single"})}),Object(b.jsx)(s.b,{path:"/login",exact:!0,children:Object(b.jsx)(Qe,{})}),Object(b.jsx)(s.b,{path:"/register",exact:!0,children:Object(b.jsx)(Xe,{})}),Object(b.jsx)(s.b,{path:"/forgot-password",exact:!0,children:Object(b.jsx)(it,{})}),Object(b.jsx)(s.b,{path:"/reset-password",exact:!0,children:Object(b.jsx)(lt,{})}),Object(b.jsx)(Gt,{path:"/profile",exact:!0,children:Object(b.jsx)(wt,{type:"profile"})}),Object(b.jsx)(Gt,{path:"/profile/orders",exact:!0,children:Object(b.jsx)(wt,{type:"history"})}),Object(b.jsx)(Gt,{path:"/profile/orders/:orderId",exact:!0,children:Object(b.jsx)(sn,{type:"single",wsType:V.UserOrders})}),Object(b.jsx)(s.b,{path:"/feed",exact:!0,children:Object(b.jsx)(Mt,{})}),Object(b.jsx)(s.b,{path:"/feed/:orderId",exact:!0,children:Object(b.jsx)(sn,{type:"single",wsType:V.AllOrders})}),Object(b.jsx)(s.b,{children:Object(b.jsx)($t,{})})]}),r&&Object(b.jsx)(s.b,{path:"/ingredients/:ingredientId",children:Object(b.jsx)(W,{onClick:a,children:Object(b.jsx)(Kt,{})})}),r&&r.pathname.includes("feed")&&Object(b.jsx)(s.b,{path:"/feed/:orderId",children:Object(b.jsx)(W,{onClick:a,children:Object(b.jsx)(sn,{})})}),r&&r.pathname.includes("profile/orders")&&Object(b.jsx)(s.b,{path:"/profile/orders/:orderId",children:Object(b.jsx)(W,{onClick:a,children:Object(b.jsx)(sn,{})})})]})};return Object(b.jsx)(o.a,{children:Object(b.jsx)(n,{})})},ln=(n(229),n(24)),dn={ingRequest:!1,ingError:!1,allIngredients:null,currentViewIngredient:null},un={currentOrderBun:null,currentOrderIngredients:null},_n={getOrderRequest:!1,getOrderFailed:!1,orderNumber:""},mn={forgotPasswordRequest:!1,forgotPasswordStatus:!1,forgotPasswordError:!1,resetPasswordRequest:!1,resetPasswordStatus:!1,resetPasswordError:!1,recoveryStage:null},jn={isLoading:!0,registrationRequest:!1,registrationError:!1,authRequest:!1,authError:!1,refreshTokenRequest:!1,refreshTokenError:!1,getUserRequest:!1,getUserError:!1,patchUserRequest:!1,patchUserError:!1,isUserDataUpdated:!1,logoutRequest:!1,logoutError:!1,user:null,accessToken:null,refreshToken:null},bn={messages:null,isConnected:!1,isFailed:!1,total:null,totalToday:null,isFirstLoading:!1},pn=Object(ln.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Wt:return Object(D.a)(Object(D.a)({},e),{},{ingRequest:!0,ingError:!1});case zt:return Object(D.a)(Object(D.a)({},e),{},{ingRequest:!1,ingError:!0});case Ht:return Object(D.a)(Object(D.a)({},e),{},{ingRequest:!1,ingError:!1,allIngredients:t.ingredientsData});case Qt:return Object(D.a)(Object(D.a)({},e),{},{currentViewIngredient:e.allIngredients?e.allIngredients.find((function(e){return e._id===t.id})):null});case Zt:return Object(D.a)(Object(D.a)({},e),{},{currentViewIngredient:null});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:un,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return"bun"===t.ingType?Object(D.a)(Object(D.a)({},e),{},{currentOrderBun:t.data}):Object(D.a)(Object(D.a)({},e),{},{currentOrderIngredients:e.currentOrderIngredients?[].concat(Object(U.a)(e.currentOrderIngredients),[t.data]):[t.data]});case ue:return Object(D.a)(Object(D.a)({},e),{},{currentOrderIngredients:e.currentOrderIngredients&&e.currentOrderIngredients.filter((function(e){return e.id!==t.ingId}))});case _e:return Object(D.a)(Object(D.a)({},e),{},{currentOrderIngredients:t.data});case me:return Object(D.a)(Object(D.a)({},e),{},{currentOrderBun:null,currentOrderIngredients:null});default:return Object(D.a)({},e)}},makingOrder:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_n,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:return Object(D.a)(Object(D.a)({},e),{},{getOrderRequest:!0});case se:return Object(D.a)(Object(D.a)({},e),{},{getOrderFailed:!0,getOrderRequest:!1});case oe:return Object(D.a)(Object(D.a)({},e),{},{orderNumber:t.data.order.number,getOrderRequest:!1});case le:return Object(D.a)(Object(D.a)({},e),{},{orderNumber:""});default:return e}},forgotPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case et:case rt:return Object(D.a)(Object(D.a)({},e),{},{forgotPasswordRequest:!0});case tt:return Object(D.a)(Object(D.a)({},e),{},{forgotPasswordRequest:!1,forgotPasswordStatus:!1,forgotPasswordError:!0});case nt:return Object(D.a)(Object(D.a)({},e),{},{forgotPasswordRequest:!1,forgotPasswordStatus:!0,recoveryStage:1});case at:return Object(D.a)(Object(D.a)({},e),{},{forgotPasswordRequest:!1,resetPasswordStatus:!1,resetPasswordError:!0});case ct:return Object(D.a)(Object(D.a)({},e),{},{forgotPasswordRequest:!1,resetPasswordStatus:!0});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke:return Object(D.a)(Object(D.a)({},e),{},{registrationRequest:!0,registrationError:!1});case Ee:return Object(D.a)(Object(D.a)({},e),{},{registrationRequest:!1,registrationError:!1});case Re:return Object(D.a)(Object(D.a)({},e),{},{registrationRequest:!1,registrationError:!1,user:t.data.user,accessToken:t.data.accessToken,refreshToken:t.data.refreshToken});case Se:return Object(D.a)(Object(D.a)({},e),{},{authRequest:!0,authError:!1});case Te:return Object(D.a)(Object(D.a)({},e),{},{authRequest:!1,authError:!0});case we:return Object(D.a)(Object(D.a)({},e),{},{authRequest:!1,authError:!1,user:t.data.user,accessToken:t.data.accessToken,refreshToken:t.data.refreshToken,isLoading:!1});case Ie:return Object(D.a)(Object(D.a)({},e),{},{refreshTokenRequest:!0});case Ce:return Object(D.a)(Object(D.a)({},e),{},{refreshTokenRequest:!1,refreshTokenError:!0});case Ue:return console.log("\u0434\u043e\u0448\u043b\u043e"),Object(D.a)(Object(D.a)({},e),{},{refreshTokenRequest:!1,refreshTokenError:!1,refreshToken:t.data.refreshToken,accessToken:t.data.accessToken});case Pe:return Object(D.a)(Object(D.a)({},e),{},{getUserRequest:!0,getUserError:!1});case Ae:return Object(D.a)(Object(D.a)({},e),{},{getUserRequest:!1,getUserError:!0});case qe:return Object(D.a)(Object(D.a)({},e),{},{getUserRequest:!1,getUserError:!1,user:t.data,isLoading:!1});case Me:return Object(D.a)(Object(D.a)({},e),{},{patchUserRequest:!0,patchUserError:!1});case Fe:return Object(D.a)(Object(D.a)({},e),{},{patchUserRequest:!1,patchUserError:!0});case Le:return Object(D.a)(Object(D.a)({},e),{},{patchUserRequest:!1,patchUserError:!1,isUserDataUpdated:!0,user:t.data});case Ge:return Object(D.a)(Object(D.a)({},e),{},{isUserDataUpdated:!1});case Ve:return Object(D.a)(Object(D.a)({},e),{},{logoutRequest:!0,logoutError:!1});case We:return Object(D.a)(Object(D.a)({},e),{},{logoutRequest:!1,logoutError:!0});case ze:return Object(D.a)(Object(D.a)({},e),{},{logoutRequest:!1,logoutError:!1,user:null,accessToken:null,refreshToken:null,isLoading:!1});default:return e}},ws:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xt:return Object(D.a)(Object(D.a)({},e),{},{isConnected:!0,isFailed:!1});case ht:return Object(D.a)(Object(D.a)({},e),{},{isConnected:!1,isFailed:!1});case gt:return Object(D.a)(Object(D.a)({},e),{},{isConnected:!1,isFailed:!0});case vt:return Object(D.a)(Object(D.a)({},e),{},{messages:t.payload.orders,total:t.payload.total,totalToday:t.payload.totalToday,isFirstLoading:!!e.messages});default:return Object(D.a)({},e)}}}),On=function(e){return function(t){return function(n){return function(r){var a,c=t.dispatch,i=null,s=r.type,o=r.url,l=r.connection,d=e.wsInit,u=e.onOpen,_=e.onClose,m=e.onMessage,j=e.onError;if(s===d){var b=localStorage.getItem("accessToken"),p=l===V.AllOrders?o:o+"?token=".concat(b);i=new WebSocket(p)}s===_&&(null===(a=i)||void 0===a||a.close());i&&(i.onopen=function(){return c({type:u})},i.onclose=function(){c({type:_})},i.onmessage=function(e){var t=e.data,n=JSON.parse(t);c({type:m,payload:n})},i.onerror=function(){c({type:j})}),n(r)}}}},fn=n(118),xn={wsInit:ft,onOpen:xt,onClose:ht,onError:gt,onMessage:vt},gn=window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ln.c,hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(ln.d)(pn,e,Object(ln.c)(gn(Object(ln.a)(fn.a,On(xn)))))}();c.a.render(Object(b.jsx)(i.a,{store:hn,children:Object(b.jsx)(on,{})}),document.getElementById("root"))},25:function(e,t,n){e.exports={profile_nav_link:"profile_profile_nav_link__2Y_zL",profile_nav_active_link:"profile_profile_nav_active_link__1j7ed",nav_container:"profile_nav_container__3klNW",profile_container:"profile_profile_container__tF_VR",error_info:"profile_error_info___Rqwd",ok_message_info:"profile_ok_message_info__2uqv7"}},28:function(e,t,n){e.exports={ingredient_item:"ingredient-item_ingredient_item__29IRw",image:"ingredient-item_image__1b6sD",price:"ingredient-item_price__3KALI",price_text:"ingredient-item_price_text__229-t",name_text:"ingredient-item_name_text__1dEYy",link:"ingredient-item_link__1DdAF"}},29:function(e,t,n){e.exports={section_container:"burger-constructor_section_container__38fdE",total:"burger-constructor_total__39tEC",total_price:"burger-constructor_total_price__34sGz",total_price_number:"burger-constructor_total_price_number__38yr9",section_border:"burger-constructor_section_border__25Wl6",section_border_before:"burger-constructor_section_border_before__3MguM",ingredients_wrapper:"burger-constructor_ingredients_wrapper__1usIb"}},30:function(e,t,n){e.exports={login_container:"login_login_container__21SvE",form_block:"login_form_block__PE2Dc",bottom_info:"login_bottom_info__30Z6R",link:"login_link__vnRog"}},31:function(e,t,n){e.exports={order_block:"order-panel_order_block__1s27n",number_date_block:"order-panel_number_date_block__2gBLc",bottom_block:"order-panel_bottom_block__3XFdp",ingredients_block:"order-panel_ingredients_block__Cgo9l",image_block:"order-panel_image_block__3NU2b",ingredient_image:"order-panel_ingredient_image__3Z_Ij",rest_number:"order-panel_rest_number__2ANkF",price_block:"order-panel_price_block__2kb_C",link:"order-panel_link__3CfME"}},36:function(e,t,n){e.exports={container:"order-ready-status_container__3g30C",orders_status_block_wrapper:"order-ready-status_orders_status_block_wrapper__mVLN0",orders_status_block:"order-ready-status_orders_status_block__3EbCe"}},37:function(e,t,n){e.exports={single_container:"order-information_single_container__1m5Ao",container:"order-information_container__2UU1Y",number_block:"order-information_number_block__2kgZK",bottom_block:"order-information_bottom_block__2EV71",price_block:"order-information_price_block__1ro13"}},45:function(e,t,n){e.exports={login_container:"register_login_container__1inmf",form_block:"register_form_block__zZ4CN",bottom_info:"register_bottom_info__1Ps6b",link:"register_link__25Wyb"}},46:function(e,t,n){e.exports={login_container:"forgot-password_login_container__2F3J1",form_block:"forgot-password_form_block__3uJ0E",bottom_info:"forgot-password_bottom_info__23_T6",link:"forgot-password_link__2VbmV"}},47:function(e,t,n){e.exports={login_container:"reset-password_login_container__1yt2E",form_block:"reset-password_form_block__2W-7I",bottom_info:"reset-password_bottom_info__2_PR6",link:"reset-password_link__1jK23"}},48:function(e,t,n){e.exports={image_block:"ingredient-logo_image_block__1qiKq",image_block_position_absolute:"ingredient-logo_image_block_position_absolute__1JIM8",ingredient_image:"ingredient-logo_ingredient_image__1qVyI",rest_number:"ingredient-logo_rest_number__3I9-H"}},49:function(e,t,n){e.exports={ingredient_wrapper:"order-ingredient-info_ingredient_wrapper__3tJVb",name_block:"order-ingredient-info_name_block__3NBRW",price_block:"order-ingredient-info_price_block__35BPV",ingredients_wrapper:"order-ingredient-info_ingredients_wrapper__OVRZi"}},58:function(e,t,n){e.exports={content_block:"order-details_content_block__15YuZ",grey_text:"order-details_grey_text__1VImJ",order_number:"order-details_order_number__1ZbO9"}},81:function(e,t,n){e.exports={modal_content:"modal_modal_content__1zW45",close_icon:"modal_close_icon__1X951"}},83:function(e,t,n){e.exports={main_container:"main_main_container__3m2T1",ingredients_block:"main_ingredients_block__21ihO"}},85:function(e,t,n){e.exports={profile_nav_link:"profile-user-block_profile_nav_link__dRWn9",profile_nav_active_link:"profile-user-block_profile_nav_active_link__nwa18",nav_container:"profile-user-block_nav_container__yjvg_",profile_container:"profile-user-block_profile_container__2874U",error_info:"profile-user-block_error_info__1Ja2f",ok_message_info:"profile-user-block_ok_message_info__1mibv"}},86:function(e,t,n){e.exports={orders_container:"order-history_orders_container__Msh97",ingredients_wrapper:"order-history_ingredients_wrapper__2EVr3"}},87:function(e,t,n){e.exports={content_container:"feed_content_container__OCB57",ingredients_wrapper:"feed_ingredients_wrapper__3Lx6Z"}}},[[230,1,2]]]);
//# sourceMappingURL=main.02ff2035.chunk.js.map